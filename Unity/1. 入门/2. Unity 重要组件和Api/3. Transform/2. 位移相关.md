# Unity Transformä½ç§»è¯¦è§£

## ä¸€ã€Transformä½ç§»åŸºç¡€æ¦‚å¿µ

### 1.1 ä»€ä¹ˆæ˜¯Transformä½ç§»

**Transformä½ç§»**æ˜¯æŒ‡é€šè¿‡ä¿®æ”¹GameObjectçš„Transformç»„ä»¶ä½ç½®å±æ€§ï¼Œä½¿å…¶åœ¨3Dç©ºé—´ä¸­ç§»åŠ¨çš„è¿‡ç¨‹ã€‚è¿™æ˜¯Unityä¸­æœ€åŸºç¡€ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„å¯¹è±¡æ“ä½œä¹‹ä¸€ï¼Œç”¨äºå®ç°è§’è‰²ç§»åŠ¨ã€æ‘„åƒæœºè·Ÿéšã€ç‰©ä½“åŠ¨ç”»ç­‰å„ç§æ¸¸æˆåŠŸèƒ½ã€‚

> ğŸ’¡ **æ ¸å¿ƒç†è§£**ï¼š  
> ä½ç§»çš„æœ¬è´¨æ˜¯**æ”¹å˜å¯¹è±¡åœ¨ä¸–ç•Œåæ ‡ç³»ä¸­çš„ä½ç½®**ï¼Œå¯ä»¥é€šè¿‡ç›´æ¥è®¾ç½®åæ ‡æˆ–ç›¸å¯¹ç§»åŠ¨æ¥å®ç°ã€‚

---

## äºŒã€ä½ç§»ç›¸å…³å±æ€§ä¸æ–¹æ³•

### 2.1 ä½ç½®å±æ€§

#### transform.positionï¼ˆä¸–ç•Œåæ ‡ä½ç½®ï¼‰
```csharp
// è·å–å½“å‰ä¸–ç•Œåæ ‡ä½ç½®
Vector3 currentPosition = transform.position;

// è®¾ç½®æ–°çš„ä¸–ç•Œåæ ‡ä½ç½®
transform.position = new Vector3(5, 0, 10);

// ä¿®æ”¹å•ä¸ªåæ ‡åˆ†é‡ï¼ˆéœ€è¦å®Œæ•´èµ‹å€¼ï¼‰
Vector3 pos = transform.position;
pos.y = 2f;           // å°†Yåæ ‡è®¾ä¸º2
transform.position = pos;
```

#### transform.localPositionï¼ˆå±€éƒ¨åæ ‡ä½ç½®ï¼‰
```csharp
// è·å–ç›¸å¯¹äºçˆ¶å¯¹è±¡çš„ä½ç½®
Vector3 localPos = transform.localPosition;

// è®¾ç½®å±€éƒ¨åæ ‡ä½ç½®
transform.localPosition = new Vector3(1, 0, 0);
```

> ğŸŒŸ **å…³é”®åŒºåˆ«**ï¼š
> - **position**ï¼šç»å¯¹ä½ç½®ï¼Œç›¸å¯¹äºåœºæ™¯åŸç‚¹
> - **localPosition**ï¼šç›¸å¯¹ä½ç½®ï¼Œç›¸å¯¹äºçˆ¶å¯¹è±¡ï¼ˆæ— çˆ¶å¯¹è±¡æ—¶ç­‰åŒäºpositionï¼‰

---

### 2.2 ç›¸å¯¹ç§»åŠ¨æ–¹æ³• - Translate

**Translateæ–¹æ³•**æ˜¯æœ€å¸¸ç”¨çš„ç›¸å¯¹ç§»åŠ¨æ–¹å¼ï¼Œå®ƒå…è®¸å¯¹è±¡åŸºäºå½“å‰æœå‘è¿›è¡Œç§»åŠ¨ã€‚

```csharp
// åŸºæœ¬ç”¨æ³•ï¼šæ²¿è‡ªèº«åæ ‡è½´ç§»åŠ¨
transform.Translate(Vector3.forward * speed * Time.deltaTime);  // å‘å‰ç§»åŠ¨
transform.Translate(Vector3.right * speed * Time.deltaTime);    // å‘å³ç§»åŠ¨
transform.Translate(Vector3.up * speed * Time.deltaTime);       // å‘ä¸Šç§»åŠ¨

// æŒ‡å®šç§»åŠ¨ç©ºé—´
transform.Translate(1, 0, 0, Space.Self);     // è‡ªèº«åæ ‡ç³»Xè½´ï¼ˆé»˜è®¤ï¼‰
transform.Translate(1, 0, 0, Space.World);    // ä¸–ç•Œåæ ‡ç³»Xè½´
```

#### Spaceå‚æ•°è¯¦è§£
| å‚æ•° | è¯´æ˜ | åº”ç”¨åœºæ™¯ |
|------|------|----------|
| `Space.Self` | ç›¸å¯¹äºå¯¹è±¡è‡ªèº«çš„åæ ‡ç³» | è§’è‰²å‰è¿›ã€åé€€ã€å·¦å³ç§»åŠ¨ |
| `Space.World` | ç›¸å¯¹äºä¸–ç•Œåæ ‡ç³» | å›ºå®šæ–¹å‘ç§»åŠ¨ï¼ˆå¦‚ä¸Šä¸‹å·¦å³é”®æ§åˆ¶ï¼‰ |

```csharp
// ç¤ºä¾‹ï¼šä¸åŒSpaceå‚æ•°çš„æ•ˆæœ
void Update()
{
    // WASDæ§åˆ¶ï¼šè‡ªèº«åæ ‡ç³»ï¼ˆè§’è‰²é¢å‘å†³å®šç§»åŠ¨æ–¹å‘ï¼‰
    if (Input.GetKey(KeyCode.W))
        transform.Translate(Vector3.forward * speed * Time.deltaTime, Space.Self);
    
    // æ–¹å‘é”®æ§åˆ¶ï¼šä¸–ç•Œåæ ‡ç³»ï¼ˆå›ºå®šæ–¹å‘ï¼Œä¸å—è§’è‰²æœå‘å½±å“ï¼‰
    if (Input.GetKey(KeyCode.UpArrow))
        transform.Translate(Vector3.forward * speed * Time.deltaTime, Space.World);
}
```

---

### 2.3 Transformç»„ä»¶çš„å…¶ä»–ä½ç§»ç›¸å…³å±æ€§

#### transform.up / transform.right / transform.forward
è¿™äº›å±æ€§è¿”å›**ç»è¿‡æ—‹è½¬åçš„æ–¹å‘å‘é‡**ï¼Œæ¯”Vector3.upç­‰é¢„å®šä¹‰å‘é‡æ›´å‡†ç¡®ã€‚

```csharp
// æ²¿å¯¹è±¡å®é™…æœå‘ç§»åŠ¨ï¼ˆè€ƒè™‘äº†å¯¹è±¡çš„æ—‹è½¬ï¼‰
transform.Translate(transform.forward * speed * Time.deltaTime);

// å¯¹æ¯”ï¼šVector3.forwardæ˜¯å›ºå®šçš„Zè½´æ­£æ–¹å‘
transform.Translate(Vector3.forward * speed * Time.deltaTime);
```

> ğŸ’¡ **é‡è¦åŒºåˆ«**ï¼š
> - `Vector3.forward`ï¼šå§‹ç»ˆæ˜¯`(0,0,1)`ï¼Œå›ºå®šçš„ä¸–ç•Œåæ ‡ç³»æ–¹å‘
> - `transform.forward`ï¼šæ ¹æ®å¯¹è±¡å½“å‰æ—‹è½¬è®¡ç®—çš„å®é™…å‰æ–¹æ–¹å‘

---

## ä¸‰ã€ä½ç§»å®ç°æ–¹å¼å¯¹æ¯”

### 3.1 ç›´æ¥è®¾ç½®ä½ç½® vs Translateæ–¹æ³•

| æ–¹å¼ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ |
|------|------|------|----------|
| **ç›´æ¥è®¾ç½®position** | ç²¾ç¡®æ§åˆ¶ç›®æ ‡ä½ç½®<br>é€‚åˆç¬ç§»æ•ˆæœ | éœ€è¦è®¡ç®—å®Œæ•´åæ ‡<br>ä¸ç›´è§‚ | ä¼ é€ã€ç¬ç§»ã€ç²¾ç¡®ä½ç½®è®¾ç½® |
| **Translateæ–¹æ³•** | ç›¸å¯¹ç§»åŠ¨ï¼Œä»£ç ç›´è§‚<br>è‡ªåŠ¨å¤„ç†åæ ‡ç³»è½¬æ¢ | åªèƒ½ç›¸å¯¹ç§»åŠ¨<br>ä¸é€‚åˆç²¾ç¡®ä½ç½®æ§åˆ¶ | è§’è‰²ç§»åŠ¨ã€è¿ç»­è¿åŠ¨ã€åŠ¨ç”» |

```csharp
// ç›´æ¥è®¾ç½®ä½ç½®ç¤ºä¾‹ï¼šç¬ç§»åˆ°æŒ‡å®šç‚¹
public void Teleport(Vector3 targetPosition)
{
    transform.position = targetPosition;
}

// Translateç¤ºä¾‹ï¼šå¹³æ»‘ç§»åŠ¨
void Update()
{
    if (Input.GetKey(KeyCode.W))
    {
        transform.Translate(transform.forward * moveSpeed * Time.deltaTime);
    }
}
```

---

### 3.2 ä¸åŒåæ ‡ç³»ä¸‹çš„ç§»åŠ¨æ•ˆæœ

#### ä¸–ç•Œåæ ‡ç³»ç§»åŠ¨
- ç§»åŠ¨æ–¹å‘å›ºå®šï¼Œä¸å—å¯¹è±¡æ—‹è½¬å½±å“
- é€‚åˆUIæ§åˆ¶ã€å›ºå®šæ–¹å‘ç§»åŠ¨

#### è‡ªèº«åæ ‡ç³»ç§»åŠ¨
- ç§»åŠ¨æ–¹å‘éšå¯¹è±¡æ—‹è½¬è€Œå˜åŒ–
- é€‚åˆç¬¬ä¸€äººç§°/ç¬¬ä¸‰äººç§°è§’è‰²æ§åˆ¶

```csharp
public class MovementExample : MonoBehaviour
{
    public float speed = 5f;
    
    void Update()
    {
        // ä¸–ç•Œåæ ‡ç³»ç§»åŠ¨ï¼ˆå›ºå®šæ–¹å‘ï¼‰
        float h = Input.GetAxis("Horizontal");
        float v = Input.GetAxis("Vertical");
        Vector3 worldMove = new Vector3(h, 0, v);
        transform.Translate(worldMove * speed * Time.deltaTime, Space.World);
        
        // è‡ªèº«åæ ‡ç³»ç§»åŠ¨ï¼ˆè·Ÿéšæœå‘ï¼‰
        // Vector3 selfMove = new Vector3(h, 0, v);
        // transform.Translate(selfMove * speed * Time.deltaTime, Space.Self);
    }
}
```

---

## å››ã€å®ç”¨ä½ç§»ç¤ºä¾‹

### 4.1 åŸºç¡€è§’è‰²æ§åˆ¶å™¨

```csharp
public class BasicMovement : MonoBehaviour
{
    public float moveSpeed = 5f;
    public float rotationSpeed = 100f;
    
    void Update()
    {
        // è·å–è¾“å…¥
        float horizontal = Input.GetAxis("Horizontal");
        float vertical = Input.GetAxis("Vertical");
        
        // ç§»åŠ¨ï¼ˆè‡ªèº«åæ ‡ç³»ï¼‰
        Vector3 moveDirection = new Vector3(horizontal, 0, vertical);
        transform.Translate(moveDirection * moveSpeed * Time.deltaTime, Space.Self);
        
        // æ—‹è½¬ï¼ˆé¼ æ ‡æ§åˆ¶ï¼‰
        if (Input.GetMouseButton(1)) // å³é”®
        {
            float mouseX = Input.GetAxis("Mouse X") * rotationSpeed * Time.deltaTime;
            transform.Rotate(Vector3.up, mouseX);
        }
    }
}
```

---

### 4.2 å¹³æ»‘è·Ÿéšï¼ˆå¸¦åç§»ï¼‰

```csharp
public class SmoothFollow : MonoBehaviour
{
    public Transform target;
    public Vector3 offset = new Vector3(0, 5, -10);
    public float smoothSpeed = 0.125f;
    
    void LateUpdate()
    {
        if (target != null)
        {
            // è®¡ç®—ç›®æ ‡ä½ç½®ï¼ˆç›®æ ‡ä½ç½® + åç§»ï¼‰
            Vector3 desiredPosition = target.position + offset;
            
            // å¹³æ»‘æ’å€¼åˆ°ç›®æ ‡ä½ç½®
            Vector3 smoothedPosition = Vector3.Lerp(transform.position, desiredPosition, smoothSpeed);
            transform.position = smoothedPosition;
            
            // ä¿æŒçœ‹å‘ç›®æ ‡
            transform.LookAt(target);
        }
    }
}
```

---

### 4.3 é™åˆ¶ç§»åŠ¨èŒƒå›´

```csharp
public class BoundaryMovement : MonoBehaviour
{
    public float speed = 5f;
    public Vector3 minBounds = new Vector3(-10, 0, -10);
    public Vector3 maxBounds = new Vector3(10, 0, 10);
    
    void Update()
    {
        // è·å–è¾“å…¥å¹¶ç§»åŠ¨
        float h = Input.GetAxis("Horizontal");
        float v = Input.GetAxis("Vertical");
        Vector3 move = new Vector3(h, 0, v);
        transform.Translate(move * speed * Time.deltaTime, Space.World);
        
        // é™åˆ¶åœ¨è¾¹ç•Œå†…
        Vector3 clampedPosition = transform.position;
        clampedPosition.x = Mathf.Clamp(clampedPosition.x, minBounds.x, maxBounds.x);
        clampedPosition.y = Mathf.Clamp(clampedPosition.y, minBounds.y, maxBounds.y);
        clampedPosition.z = Mathf.Clamp(clampedPosition.z, minBounds.z, maxBounds.z);
        transform.position = clampedPosition;
    }
}
```

---

## äº”ã€é«˜çº§ä½ç§»æŠ€å·§

### 5.1 åæ ‡ç³»è½¬æ¢åº”ç”¨

```csharp
// å°†å±å¹•åæ ‡è½¬æ¢ä¸ºä¸–ç•Œåæ ‡ï¼ˆå°„çº¿æ£€æµ‹ï¼‰
void ScreenToWorldRaycast()
{
    Ray ray = Camera.main.ScreenPointToRay(Input.mousePosition);
    if (Physics.Raycast(ray, out RaycastHit hit))
    {
        // ç§»åŠ¨åˆ°ç‚¹å‡»ä½ç½®
        transform.position = hit.point;
    }
}

// å­å¯¹è±¡ç›¸å¯¹äºçˆ¶å¯¹è±¡çš„åç§»ç§»åŠ¨
void MoveRelativeToParent()
{
    // è·å–çˆ¶å¯¹è±¡çš„ä¸–ç•Œä½ç½®
    Vector3 parentWorldPos = transform.parent.position;
    
    // è®¡ç®—ç›¸å¯¹äºçˆ¶å¯¹è±¡çš„åç§»
    Vector3 offset = transform.TransformPoint(Vector3.right * 2f);
    
    // ç§»åŠ¨åˆ°æ–°ä½ç½®
    transform.position = offset;
}
```

---

### 5.2 æ—¶é—´ç›¸å…³çš„å¹³æ»‘ç§»åŠ¨

```csharp
// ä½¿ç”¨Lerpè¿›è¡Œå¹³æ»‘ç§»åŠ¨
public IEnumerator SmoothMoveTo(Vector3 targetPosition, float duration)
{
    Vector3 startPosition = transform.position;
    float elapsedTime = 0f;
    
    while (elapsedTime < duration)
    {
        transform.position = Vector3.Lerp(startPosition, targetPosition, elapsedTime / duration);
        elapsedTime += Time.deltaTime;
        yield return null;
    }
    
    transform.position = targetPosition;
}

// è°ƒç”¨ç¤ºä¾‹
StartCoroutine(SmoothMoveTo(new Vector3(10, 0, 10), 2f));
```

---

## å…­ã€æœ€ä½³å®è·µä¸å¸¸è§é”™è¯¯

### 6.1 æ€§èƒ½è€ƒè™‘

| æ“ä½œ | æ€§èƒ½ | å»ºè®® |
|------|------|------|
| ç›´æ¥è®¾ç½®position | é«˜ | æ¨èç”¨äºç²¾ç¡®ä½ç½®æ§åˆ¶ |
| Translateæ–¹æ³• | é«˜ | æ¨èç”¨äºç›¸å¯¹ç§»åŠ¨ |
| é¢‘ç¹åæ ‡è½¬æ¢ | ä¸­ | é¿å…åœ¨Updateä¸­è¿‡åº¦ä½¿ç”¨ |
| å¤æ‚æ’å€¼è®¡ç®— | ä¸­ | æ ¹æ®éœ€æ±‚é€‰æ‹©åˆé€‚ç®—æ³• |

> ğŸ’¡ **æœ€ä½³å®è·µ**ï¼š
> - **åœ¨Updateä¸­ç§»åŠ¨æ—¶åŠ¡å¿…ä¹˜ä»¥Time.deltaTime**ï¼Œç¡®ä¿å¸§ç‡æ— å…³
> - **ä½¿ç”¨LateUpdateå¤„ç†æ‘„åƒæœºè·Ÿéš**ï¼Œç¡®ä¿è·Ÿéšç›®æ ‡å·²æ›´æ–°
> - **é¿å…åœ¨Updateä¸­é¢‘ç¹åˆ›å»ºVector3å¯¹è±¡**ï¼Œå¯å¤ç”¨å˜é‡
> - **æ ¹æ®éœ€æ±‚é€‰æ‹©åˆé€‚çš„åæ ‡ç³»**ï¼ˆSelf vs Worldï¼‰

---

### 6.2 å¸¸è§é”™è¯¯ä¸è§£å†³æ–¹æ¡ˆ

| é”™è¯¯ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| ç§»åŠ¨é€Ÿåº¦ä¸å¸§ç‡ç›¸å…³ | æœªä¹˜ä»¥Time.deltaTime | åœ¨Updateä¸­ç§»åŠ¨æ—¶ä¹˜ä»¥Time.deltaTime |
| æ··æ·†Vector3å’Œtransformæ–¹å‘ | ä¸ç†è§£æ—‹è½¬å¯¹æ–¹å‘çš„å½±å“ | ä½¿ç”¨transform.forwardè€Œä¸æ˜¯Vector3.forward |
| ç›´æ¥ä¿®æ”¹positionåˆ†é‡ | Vector3æ˜¯å€¼ç±»å‹ï¼Œæ— æ³•ç›´æ¥ä¿®æ”¹ | å…ˆè·å–å®Œæ•´Vector3ï¼Œä¿®æ”¹åå†èµ‹å€¼ |
| å¿½ç•¥çˆ¶å­å±‚çº§å½±å“ | åœ¨æœ‰çˆ¶å¯¹è±¡æ—¶ç›´æ¥ä½¿ç”¨worldåæ ‡ | è€ƒè™‘ä½¿ç”¨localPositionæˆ–åæ ‡è½¬æ¢ |
| æ‘„åƒæœºæŠ–åŠ¨ | åœ¨Updateä¸­å¤„ç†è·Ÿéš | æ”¹ç”¨LateUpdateå¤„ç†æ‘„åƒæœºé€»è¾‘ |

---

## ä¸ƒã€æ€»ç»“ï¼šTransformä½ç§»é»„é‡‘æ³•åˆ™

1. **åæ ‡ç³»é€‰æ‹©**ï¼š`Space.Self`ç”¨äºè§’è‰²æ§åˆ¶ï¼Œ`Space.World`ç”¨äºå›ºå®šæ–¹å‘
2. **å¸§ç‡æ— å…³**ï¼šUpdateä¸­ç§»åŠ¨å¿…é¡»ä¹˜ä»¥`Time.deltaTime`
3. **æ–¹å‘å‘é‡**ï¼šä½¿ç”¨`transform.forward`è€Œé`Vector3.forward`ï¼ˆè€ƒè™‘æ—‹è½¬ï¼‰
4. **ä½ç½®ä¿®æ”¹**ï¼šä¸èƒ½ç›´æ¥ä¿®æ”¹`position.x`ï¼Œéœ€å®Œæ•´èµ‹å€¼
5. **æ‘„åƒæœºè·Ÿéš**ï¼šä½¿ç”¨`LateUpdate`ç¡®ä¿è·Ÿéšç›®æ ‡å·²æ›´æ–°
6. **å¹³æ»‘ç§»åŠ¨**ï¼šä½¿ç”¨`Vector3.Lerp`æˆ–`Vector3.MoveTowards`å®ç°æµç•…æ•ˆæœ
7. **è¾¹ç•Œé™åˆ¶**ï¼šä½¿ç”¨`Mathf.Clamp`é™åˆ¶ç§»åŠ¨èŒƒå›´

> âœ¨ **ç»ˆææç¤º**ï¼š  
> "Transformä½ç§»æ˜¯Unityæ¸¸æˆå¼€å‘çš„åŸºçŸ³ï¼Œ  
> ç†è§£åæ ‡ç³»ã€æŒæ¡ç§»åŠ¨æ–¹æ³•ï¼Œä½ å°±èƒ½è®©ä»»ä½•å¯¹è±¡**ç²¾å‡†åœ°åˆ°è¾¾ä»»ä½•ä½ç½®**ï¼›  
> ç”¨å¥½è¿™äº›æŠ€å·§ï¼Œä½ çš„æ¸¸æˆå°†æ‹¥æœ‰**æµç•…è€Œè‡ªç„¶**çš„ç§»åŠ¨ä½“éªŒï¼"