# Unity Transformç¼©æ”¾ä¸â€œçœ‹å‘â€ï¼ˆLookAtï¼‰è¯¦è§£

## ä¸€ã€Transformç¼©æ”¾åŸºç¡€

### 1.1 ä»€ä¹ˆæ˜¯Transformç¼©æ”¾

**Transformç¼©æ”¾**æ˜¯æŒ‡é€šè¿‡ä¿®æ”¹GameObjectçš„Transformç»„ä»¶ç¼©æ”¾å±æ€§ï¼Œæ”¹å˜å…¶åœ¨3Dç©ºé—´ä¸­æ˜¾ç¤ºå¤§å°çš„è¿‡ç¨‹ã€‚ç¼©æ”¾å¯ä»¥ç”¨äºå®ç°ç‰©ä½“ç”Ÿé•¿/ç¼©å°ã€UIç¼©æ”¾ã€é•œå¤´å˜ç„¦ç­‰è§†è§‰æ•ˆæœã€‚

> ğŸ’¡ **æ ¸å¿ƒç†è§£**ï¼š  
> ç¼©æ”¾çš„æœ¬è´¨æ˜¯**æ”¹å˜å¯¹è±¡åœ¨å„åæ ‡è½´ä¸Šçš„æ˜¾ç¤ºæ¯”ä¾‹**ï¼Œä¸å½±å“å…¶å®é™…ç‰©ç†å°ºå¯¸ï¼ˆé™¤éä½¿ç”¨äº†ç‰©ç†ç»„ä»¶å¦‚Colliderï¼‰ã€‚

---

### 1.2 ç¼©æ”¾å±æ€§

#### transform.localScaleï¼ˆæœ¬åœ°ç¼©æ”¾ï¼‰
```csharp
// è·å–å½“å‰æœ¬åœ°ç¼©æ”¾
Vector3 currentScale = transform.localScale;

// è®¾ç½®ç»Ÿä¸€ç¼©æ”¾ï¼ˆç­‰æ¯”ç¼©æ”¾ï¼‰
transform.localScale = Vector3.one * 2f; // æ”¾å¤§2å€

// è®¾ç½®éç»Ÿä¸€ç¼©æ”¾ï¼ˆå„è½´ç‹¬ç«‹ï¼‰
transform.localScale = new Vector3(2f, 1f, 0.5f); // Xè½´æ”¾å¤§2å€ï¼ŒYè½´ä¸å˜ï¼ŒZè½´ç¼©å°ä¸€åŠ

// ä¿®æ”¹å•ä¸ªè½´çš„ç¼©æ”¾
Vector3 scale = transform.localScale;
scale.x *= 1.1f; // Xè½´å¢åŠ 10%
transform.localScale = scale;
```

> ğŸŒŸ **å…³é”®ç‚¹**ï¼š
> - **localScale** æ˜¯ç›¸å¯¹äºçˆ¶å¯¹è±¡çš„ç¼©æ”¾
> - å¦‚æœæ²¡æœ‰çˆ¶å¯¹è±¡ï¼ŒlocalScale ç­‰åŒäºä¸–ç•Œç¼©æ”¾
> - ç¼©æ”¾å€¼ä¸º1è¡¨ç¤ºåŸå§‹å¤§å°ï¼Œå¤§äº1è¡¨ç¤ºæ”¾å¤§ï¼Œå°äº1è¡¨ç¤ºç¼©å°

---

### 1.3 ç¼©æ”¾æ“ä½œæ–¹æ³•

#### ç›´æ¥è®¾ç½®ç¼©æ”¾
```csharp
// ç¬é—´ç¼©æ”¾åˆ°æŒ‡å®šå¤§å°
transform.localScale = targetScale;
```

#### å¹³æ»‘ç¼©æ”¾ï¼ˆä½¿ç”¨Lerpï¼‰
```csharp
// å¹³æ»‘è¿‡æ¸¡åˆ°ç›®æ ‡ç¼©æ”¾
transform.localScale = Vector3.Lerp(transform.localScale, targetScale, smoothSpeed * Time.deltaTime);
```

#### å¢é‡ç¼©æ”¾
```csharp
// æ¯å¸§å¢åŠ å›ºå®šæ¯”ä¾‹
transform.localScale *= 1.01f; // æ¯å¸§æ”¾å¤§1%

// æˆ–è€…åŸºäºæ—¶é—´çš„å¹³æ»‘ç¼©æ”¾
transform.localScale = Vector3.Scale(transform.localScale, new Vector3(1.01f, 1.01f, 1.01f));
```

---

## äºŒã€â€œçœ‹å‘â€ï¼ˆLookAtï¼‰åŠŸèƒ½è¯¦è§£

### 2.1 ä»€ä¹ˆæ˜¯LookAt

**LookAt** æ˜¯Transformçš„ä¸€ä¸ªé‡è¦æ–¹æ³•ï¼Œå®ƒèƒ½è®©å¯¹è±¡è‡ªåŠ¨æ—‹è½¬ä»¥**æœå‘æŒ‡å®šçš„ç›®æ ‡ç‚¹æˆ–å¯¹è±¡**ã€‚è¿™æ˜¯å®ç°æ‘„åƒæœºè·Ÿéšã€æ•Œäººç„å‡†ã€ç‚®å¡”è¿½è¸ªç­‰æ•ˆæœçš„æ ¸å¿ƒæŠ€æœ¯ã€‚

> ğŸ’¡ **æ ¸å¿ƒä»·å€¼**ï¼š  
> LookAtå°†å¤æ‚çš„æ—‹è½¬è®¡ç®—å°è£…æˆç®€å•çš„æ–¹æ³•è°ƒç”¨ï¼Œè®©å¼€å‘è€…æ— éœ€æ‰‹åŠ¨å¤„ç†å››å…ƒæ•°æˆ–æ¬§æ‹‰è§’è½¬æ¢ã€‚

---

### 2.2 LookAtåŸºæœ¬ç”¨æ³•

#### æœå‘ç›®æ ‡ä½ç½®
```csharp
// æœå‘ä¸–ç•Œåæ ‡ä¸­çš„æŸä¸ªç‚¹
Vector3 targetPosition = new Vector3(10, 0, 5);
transform.LookAt(targetPosition);
```

#### æœå‘ç›®æ ‡å¯¹è±¡
```csharp
// æœå‘å¦ä¸€ä¸ªGameObject
public Transform target;
void Update()
{
    if (target != null)
    {
        transform.LookAt(target);
    }
}
```

#### æŒ‡å®šå‘ä¸Šæ–¹å‘
```csharp
// æœå‘ç›®æ ‡ï¼Œä½†æŒ‡å®šè‡ªå®šä¹‰çš„â€œä¸Šâ€æ–¹å‘
transform.LookAt(target, customUpVector);

// å¸¸è§ç”¨æ³•ï¼šç¡®ä¿å¯¹è±¡ä¸ä¼šå€’ç½®
transform.LookAt(target, Vector3.up);
```

> ğŸŒŸ **é»˜è®¤è¡Œä¸º**ï¼š
> - é»˜è®¤çš„â€œå‰â€æ–¹å‘æ˜¯ **Zè½´æ­£æ–¹å‘**ï¼ˆVector3.forwardï¼‰
> - é»˜è®¤çš„â€œä¸Šâ€æ–¹å‘æ˜¯ **Yè½´æ­£æ–¹å‘**ï¼ˆVector3.upï¼‰

---

### 2.3 LookAté«˜çº§ç”¨æ³•

#### åç§»LookAtï¼ˆé¿å…ç›´æ¥å¯¹å‡†ä¸­å¿ƒï¼‰
```csharp
public class OffsetLookAt : MonoBehaviour
{
    public Transform target;
    public Vector3 lookOffset = Vector3.zero; // ç›®æ ‡åç§»
    
    void LateUpdate()
    {
        if (target != null)
        {
            Vector3 targetPosition = target.position + lookOffset;
            transform.LookAt(targetPosition, Vector3.up);
        }
    }
}
```

#### å¹³æ»‘LookAtï¼ˆé¿å…ç¬é—´è½¬å‘ï¼‰
```csharp
public class SmoothLookAt : MonoBehaviour
{
    public Transform target;
    public float smoothSpeed = 5f;
    
    void LateUpdate()
    {
        if (target != null)
        {
            // è®¡ç®—ç›®æ ‡æ—‹è½¬
            Quaternion targetRotation = Quaternion.LookRotation(target.position - transform.position);
            
            // å¹³æ»‘æ’å€¼åˆ°ç›®æ ‡æ—‹è½¬
            transform.rotation = Quaternion.Slerp(transform.rotation, targetRotation, smoothSpeed * Time.deltaTime);
        }
    }
}
```

#### é™åˆ¶LookAtè§’åº¦ï¼ˆé”¥å½¢è§†é‡ï¼‰
```csharp
public class LimitedLookAt : MonoBehaviour
{
    public Transform target;
    public float maxAngle = 45f; // æœ€å¤§è½¬å‘è§’åº¦
    
    void LateUpdate()
    {
        if (target != null)
        {
            Vector3 directionToTarget = (target.position - transform.position).normalized;
            Vector3 currentForward = transform.forward;
            
            // è®¡ç®—å½“å‰æœå‘ä¸ç›®æ ‡æœå‘çš„å¤¹è§’
            float angle = Vector3.Angle(currentForward, directionToTarget);
            
            if (angle <= maxAngle)
            {
                // åœ¨è§†é‡èŒƒå›´å†…ï¼Œç›´æ¥LookAt
                transform.LookAt(target);
            }
            else
            {
                // è¶…å‡ºè§†é‡èŒƒå›´ï¼Œé™åˆ¶æœ€å¤§è½¬å‘è§’åº¦
                Vector3 limitedDirection = Vector3.RotateTowards(currentForward, directionToTarget, 
                    maxAngle * Mathf.Deg2Rad * Time.deltaTime, 0f);
                transform.rotation = Quaternion.LookRotation(limitedDirection);
            }
        }
    }
}
```

---

## ä¸‰ã€å®ç”¨ç¤ºä¾‹

### 3.1 ç¼©æ”¾åŠ¨ç”»æ•ˆæœ

```csharp
public class ScaleAnimation : MonoBehaviour
{
    public Vector3 minScale = Vector3.one * 0.8f;
    public Vector3 maxScale = Vector3.one * 1.2f;
    public float animationSpeed = 2f;
    
    void Update()
    {
        // æ­£å¼¦æ³¢ç¼©æ”¾åŠ¨ç”»
        float scaleFactor = Mathf.Sin(Time.time * animationSpeed) * 0.2f + 1f;
        transform.localScale = Vector3.Lerp(minScale, maxScale, scaleFactor);
        
        // æˆ–è€…ç®€å•çš„è„‰å†²æ•ˆæœ
        // float pulse = Mathf.PingPong(Time.time * animationSpeed, 1f);
        // transform.localScale = Vector3.Lerp(minScale, maxScale, pulse);
    }
}
```

---

### 3.2 æ‘„åƒæœºè·Ÿéšä¸LookAtç»“åˆ

```csharp
public class CameraFollowLookAt : MonoBehaviour
{
    public Transform target;
    public Vector3 offset = new Vector3(0, 2, -5);
    public float followSpeed = 5f;
    public float rotationSpeed = 10f;
    
    void LateUpdate()
    {
        if (target != null)
        {
            // å¹³æ»‘è·Ÿéšä½ç½®
            Vector3 desiredPosition = target.position + offset;
            transform.position = Vector3.Lerp(transform.position, desiredPosition, followSpeed * Time.deltaTime);
            
            // å¹³æ»‘LookAtç›®æ ‡
            Vector3 direction = target.position - transform.position;
            Quaternion targetRotation = Quaternion.LookRotation(direction, Vector3.up);
            transform.rotation = Quaternion.Slerp(transform.rotation, targetRotation, rotationSpeed * Time.deltaTime);
        }
    }
}
```

---

### 3.3 UIå…ƒç´ å§‹ç»ˆé¢å‘æ‘„åƒæœºï¼ˆBillboardæ•ˆæœï¼‰

```csharp
public class Billboard : MonoBehaviour
{
    private Camera mainCamera;
    
    void Start()
    {
        mainCamera = Camera.main;
    }
    
    void LateUpdate()
    {
        if (mainCamera != null)
        {
            // è®©UIå…ƒç´ å§‹ç»ˆé¢å‘ä¸»æ‘„åƒæœº
            transform.LookAt(transform.position + mainCamera.transform.rotation * Vector3.forward, 
                           mainCamera.transform.rotation * Vector3.up);
        }
    }
}
```

---

## å››ã€æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹

### 4.1 ç¼©æ”¾æœ€ä½³å®è·µ

| åœºæ™¯ | æ¨èåšæ³• | é¿å…åšæ³• |
|------|----------|----------|
| **UIç¼©æ”¾** | ä½¿ç”¨Canvas Scaleræˆ–RectTransform | ç›´æ¥ä¿®æ”¹Transform.localScale |
| **è§’è‰²ç¼©æ”¾** | ç»Ÿä¸€ç¼©æ”¾ï¼ˆx=y=zï¼‰ | éç»Ÿä¸€ç¼©æ”¾ï¼ˆå¯èƒ½å¯¼è‡´è§†è§‰å¼‚å¸¸ï¼‰ |
| **åŠ¨ç”»ç¼©æ”¾** | ä½¿ç”¨Animationæˆ–DOTween | åœ¨Updateä¸­é¢‘ç¹ä¿®æ”¹scale |
| **ç‰©ç†å¯¹è±¡** | é¿å…è¿è¡Œæ—¶ç¼©æ”¾ | ç¼©æ”¾åä¸æ›´æ–°Collider |

> âš ï¸ **é‡è¦è­¦å‘Š**ï¼š
> - **éç»Ÿä¸€ç¼©æ”¾ä¼šå½±å“ç‰©ç†è®¡ç®—**ï¼ˆRigidbodyã€Colliderï¼‰
> - **ç¼©æ”¾ä¼šå½±å“å­å¯¹è±¡**ï¼Œå¯èƒ½äº§ç”Ÿæ„å¤–æ•ˆæœ
> - **è´Ÿç¼©æ”¾ä¼šç¿»è½¬å¯¹è±¡**ï¼Œå¯èƒ½å½±å“å…‰ç…§å’Œæ¸²æŸ“

---

### 4.2 LookAtæœ€ä½³å®è·µ

| åœºæ™¯ | æ¨èåšæ³• | é¿å…åšæ³• |
|------|----------|----------|
| **æ‘„åƒæœºæ§åˆ¶** | ä½¿ç”¨LateUpdate + å¹³æ»‘æ’å€¼ | åœ¨Updateä¸­ç›´æ¥LookAt |
| **AIæ•Œäººç„å‡†** | é™åˆ¶è½¬å‘é€Ÿåº¦å’Œè§’åº¦ | ç¬é—´è½¬å‘ç›®æ ‡ |
| **UIé¢å‘æ‘„åƒæœº** | ä½¿ç”¨Billboardè„šæœ¬ | æ‰‹åŠ¨è®¡ç®—æ—‹è½¬ |
| **å¤šäººæ¸¸æˆåŒæ­¥** | åªåœ¨æœåŠ¡å™¨ç«¯è®¡ç®—LookAt | å®¢æˆ·ç«¯é¢‘ç¹å‘é€æ—‹è½¬æ•°æ® |

> ğŸ’¡ **æ€§èƒ½æç¤º**ï¼š
> - **LookAtæ¯å¸§è°ƒç”¨å¼€é”€è¾ƒå¤§**ï¼Œè€ƒè™‘æ˜¯å¦çœŸçš„éœ€è¦æ¯å¸§æ›´æ–°
> - **ä½¿ç”¨å¹³æ»‘æ’å€¼**å¯ä»¥å‡å°‘ç½‘ç»œåŒæ­¥æ•°æ®é‡
> - **ç¼“å­˜ç›®æ ‡Transform**ï¼Œé¿å…é‡å¤GetComponent

---

### 4.3 å¸¸è§é”™è¯¯ä¸è§£å†³æ–¹æ¡ˆ

| é”™è¯¯ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| å¯¹è±¡å€’ç½® | LookAtæ—¶æœªæŒ‡å®šupå‘é‡ | ä½¿ç”¨`LookAt(target, Vector3.up)` |
| ç¼©æ”¾å½±å“å­å¯¹è±¡ | çˆ¶å¯¹è±¡ç¼©æ”¾ä¼ é€’ç»™å­å¯¹è±¡ | å°†éœ€è¦ç‹¬ç«‹ç¼©æ”¾çš„å¯¹è±¡è®¾ä¸ºæ ¹å¯¹è±¡ |
| ç‰©ç†å¼‚å¸¸ | è¿è¡Œæ—¶ç¼©æ”¾ç‰©ç†å¯¹è±¡ | é¿å…ç¼©æ”¾å¸¦Rigidbodyçš„å¯¹è±¡ï¼Œæˆ–é‡æ–°ç”ŸæˆCollider |
| LookAtæŠ–åŠ¨ | åœ¨Updateä¸­å¤„ç†æ‘„åƒæœº | æ”¹ç”¨LateUpdateå¤„ç†LookAté€»è¾‘ |
| ä¸‡å‘èŠ‚é” | è¿‡åº¦ä¾èµ–æ¬§æ‹‰è§’ | ä½¿ç”¨å››å…ƒæ•°è¿›è¡Œå¤æ‚æ—‹è½¬è®¡ç®— |

---

## äº”ã€æ€»ç»“ï¼šç¼©æ”¾ä¸LookAté»„é‡‘æ³•åˆ™

### ç¼©æ”¾åŸåˆ™
1. **ç»Ÿä¸€ç¼©æ”¾ä¼˜å…ˆ**ï¼šå°½é‡ä¿æŒx=y=zï¼Œé¿å…è§†è§‰å¼‚å¸¸
2. **é¿å…ç‰©ç†ç¼©æ”¾**ï¼šä¸è¦åœ¨è¿è¡Œæ—¶ç¼©æ”¾å¸¦ç‰©ç†ç»„ä»¶çš„å¯¹è±¡
3. **å¹³æ»‘è¿‡æ¸¡**ï¼šä½¿ç”¨Lerpå®ç°è‡ªç„¶çš„ç¼©æ”¾åŠ¨ç”»
4. **å±‚çº§è€ƒè™‘**ï¼šæ³¨æ„çˆ¶å¯¹è±¡ç¼©æ”¾å¯¹å­å¯¹è±¡çš„å½±å“

### LookAtåŸåˆ™
1. **æŒ‡å®šUpå‘é‡**ï¼šæ€»æ˜¯ä½¿ç”¨`LookAt(target, Vector3.up)`é¿å…å€’ç½®
2. **å¹³æ»‘å¤„ç†**ï¼šä½¿ç”¨Quaternion.Slerpå®ç°è‡ªç„¶çš„è½¬å‘æ•ˆæœ
3. **æ—¶æœºé€‰æ‹©**ï¼šæ‘„åƒæœºç›¸å…³é€»è¾‘æ”¾åœ¨LateUpdateä¸­
4. **æ€§èƒ½ä¼˜åŒ–**ï¼šé¿å…ä¸å¿…è¦çš„æ¯å¸§LookAtè°ƒç”¨

> âœ¨ **ç»ˆææç¤º**ï¼š  
> "Transformçš„ç¼©æ”¾è®©ä½ æŒæ§å¯¹è±¡çš„**å¤§å°å˜åŒ–**ï¼Œ  
> LookAtè®©ä½ ç²¾ç¡®æ§åˆ¶å¯¹è±¡çš„**æœå‘ç›®æ ‡**ï¼›  
> æŒæ¡è¿™ä¸¤ä¸ªæŠ€èƒ½ï¼Œä½ å°±èƒ½åˆ›é€ å‡º**ç”ŸåŠ¨è€Œç²¾å‡†**çš„3Däº¤äº’ä½“éªŒï¼"