---
tags:
  - å…¥é—¨
time: 2025-12-17T02:20:00
---
# Unityè„šæœ¬ç¼–å†™è§„èŒƒæŒ‡å—

## ä¸€ã€è„šæœ¬åˆ›å»ºåŸºç¡€è§„åˆ™

### 1.1 æ–‡ä»¶ç»„ç»‡è§„èŒƒ
- **å¿…é¡»** åœ¨ `Assets` æ–‡ä»¶å¤¹ä¸‹åˆ›å»º `Scripts` æ–‡ä»¶å¤¹ç»Ÿä¸€ç®¡ç†è„šæœ¬
- **ç¦æ­¢** åœ¨ `Assets` ä»¥å¤–çš„ç›®å½•åˆ›å»ºè„šæœ¬ï¼ˆå¦‚ `Project` æ ¹ç›®å½•ï¼‰
- **ç¤ºä¾‹ç»“æ„**ï¼š
  ```
  Assets/
  â””â”€â”€ Scripts/
      â”œâ”€â”€ PlayerController.cs
      â”œâ”€â”€ GameManager.cs
      â””â”€â”€ UIHandler.cs
  ```

### 1.2 æ–‡ä»¶å‘½åè§„åˆ™
| è§„åˆ™       | æ­£ç¡®ç¤ºä¾‹                  | é”™è¯¯ç¤ºä¾‹                | åŸå›              |
| -------- | --------------------- | ------------------- | -------------- |
| ç±»åä¸æ–‡ä»¶åä¸€è‡´ | `PlayerController.cs` | `Player.cs`         | Unity é€šè¿‡æ–‡ä»¶åæŸ¥æ‰¾ç±» |
| ä½¿ç”¨è‹±æ–‡å‘½å   | `EnemySpawner.cs`     | `æ•Œäººç”Ÿæˆå™¨.cs`          | Unity ä¸æ”¯æŒä¸­æ–‡æ–‡ä»¶å |
| é¿å…ç‰¹æ®Šå­—ç¬¦   | `BulletManager.cs`    | `Bullet$Manager.cs` | ç¼–è¯‘å™¨æŠ¥é”™          |

> ğŸ’¡ **é‡è¦æç¤º**ï¼šæ–‡ä»¶åä¸ç±»åå¿…é¡» **å®Œå…¨ä¸€è‡´**ï¼ˆåŒ…æ‹¬å¤§å°å†™ï¼‰ï¼Œå¦åˆ™ Unity æ— æ³•æŒ‚è½½è„šæœ¬ã€‚

---

## äºŒã€è„šæœ¬ç»§æ‰¿è§„åˆ™

### 2.1 MonoBehaviorç»§æ‰¿è¦æ±‚
```csharp
// âœ… æ­£ç¡®ï¼šç»§æ‰¿MonoBehaviour
public class PlayerController : MonoBehaviour { }

// âŒ é”™è¯¯ï¼šæœªç»§æ‰¿MonoBehaviour
public class PlayerManager { } // æ— æ³•æŒ‚è½½åˆ°GameObject
```

**å…³é”®è§„åˆ™**ï¼š
- **åªæœ‰ç»§æ‰¿ `MonoBehaviour` çš„è„šæœ¬æ‰èƒ½æŒ‚è½½åˆ°æ¸¸æˆå¯¹è±¡**
- **ä¸èƒ½é€šè¿‡ `new`  åˆ›å»º MonoBehaviour å®ä¾‹**
  ```csharp
  // âŒ é”™è¯¯ï¼šä¸èƒ½new
  PlayerController controller = new PlayerController(); 
  
  // âœ… æ­£ç¡®ï¼šé€šè¿‡AddComponentæŒ‚è½½
  GameObject player = new GameObject("Player");
  PlayerController controller = player.AddComponent<PlayerController>();
  ```

> âš ï¸ **é”™è¯¯æç¤º**ï¼š`You are trying to instantiate a MonoBehaviour using 'new'. Don't use 'new' on MonoBehaviour derivatives.`

### 2.2 ç»§æ‰¿ç‰¹æ€§
| ç‰¹æ€§                          | ä½œç”¨             | ç¤ºä¾‹                                                                       |
| --------------------------- | -------------- | ------------------------------------------------------------------------ |
| `MonoBehaviour`             | æ‰€æœ‰Unityè„šæœ¬å¿…é¡»ç»§æ‰¿  | `public class Player : MonoBehaviour`                                    |
| `DisallowMultipleComponent` | ç¦æ­¢åŒä¸€å¯¹è±¡æŒ‚è½½å¤šä¸ªè„šæœ¬å®ä¾‹ | `[DisallowMultipleComponent] public class CameraManager : MonoBehaviour` |

---

## ä¸‰ã€å‘½åè§„èŒƒï¼ˆå…³é”®ï¼ï¼‰

### 3.1 å‘½åé£æ ¼æ ‡å‡†
| ç±»å‹       | å‘½åè§„èŒƒ            | ç¤ºä¾‹                 | è¯´æ˜          |
| -------- | --------------- | ------------------ | ----------- |
| **ç±»å**   | PascalCase      | `PlayerController` | ç±»åé¦–å­—æ¯å¤§å†™     |
| **æ–¹æ³•å**  | PascalCase      | `MovePlayer()`     | ä¸ç±»åä¸€è‡´       |
| **å…¬å…±å˜é‡** | camelCase       | `moveSpeed = 5f`   | Inspectorå¯è§ |
| **ç§æœ‰å˜é‡** | camelCase + `_` | `_currentHealth`   | å‰ç¼€ä¸‹åˆ’çº¿       |
| **å¸¸é‡**   | å…¨å¤§å†™ + `_`       | `MAX_HEALTH = 100` | ä»…ç”¨äºå›ºå®šå€¼      |

### 3.2 å‘½åç¤ºä¾‹å¯¹æ¯”
```csharp
// âŒ æ··ä¹±å‘½å
public class Player { 
    public int health = 100;
    private int playerHealth = 100;
    private float speed = 5f;
}

// âœ… è§„èŒƒå‘½å
public class PlayerController : MonoBehaviour {
    public float moveSpeed = 5f;      // å…¬å…±å˜é‡
    private int _currentHealth = 100; // ç§æœ‰å˜é‡ï¼ˆå¸¦ä¸‹åˆ’çº¿ï¼‰
    private const int MAX_HEALTH = 100; // å¸¸é‡
}
```

---

## å››ã€ä»£ç ç»„ç»‡è§„èŒƒ

### 4.1 ä»£ç ç»“æ„æ¨¡æ¿
```csharp
using UnityEngine;
using System.Collections;

// å‘½åç©ºé—´ï¼ˆå¯é€‰ä½†æ¨èï¼‰
namespace Game.Player {
    public class PlayerController : MonoBehaviour {
        // 1. å…¬å…±å˜é‡ï¼ˆInspectorå¯è§ï¼‰
        public float moveSpeed = 5f;
        public int maxHealth = 100;

        // 2. ç§æœ‰å˜é‡
        private Rigidbody2D _rb;
        private int _currentHealth;
        private bool _isGrounded;

        // 3. å¸¸é‡
        private const float JUMP_FORCE = 8f;

        // 4. ç”Ÿå‘½å‘¨æœŸå‡½æ•°
        void Awake() { /* åˆå§‹åŒ– */ }
        void Start() { /* è®¾ç½®åˆå§‹çŠ¶æ€ */ }
        void Update() { /* è¾“å…¥å¤„ç† */ }
        void FixedUpdate() { /* ç‰©ç†å¤„ç† */ }

        // 5. è‡ªå®šä¹‰æ–¹æ³•
        private void HandleInput() { /* è¾“å…¥é€»è¾‘ */ }
        private void MovePlayer() { /* ç‰©ç†ç§»åŠ¨ */ }
        private void Jump() { /* è·³è·ƒé€»è¾‘ */ }
    }
}
```

### 4.2 ä»£ç æ³¨é‡Šè§„èŒƒ
```csharp
/// <summary>
/// ç©å®¶æ§åˆ¶å™¨ï¼Œå¤„ç†ç§»åŠ¨ã€è·³è·ƒå’Œäº¤äº’
/// </summary>
public class PlayerController : MonoBehaviour {
    // å…¬å…±å˜é‡ï¼šå¯é€šè¿‡Inspectorè°ƒæ•´
    [Tooltip("ç©å®¶ç§»åŠ¨é€Ÿåº¦")] 
    public float moveSpeed = 5f;

    // ç§æœ‰å˜é‡ï¼šå†…éƒ¨ä½¿ç”¨
    private Rigidbody2D _rb;
    private int _currentHealth;

    // åˆå§‹åŒ–ç»„ä»¶
    void Awake() {
        // è·å–åˆšä½“ç»„ä»¶ï¼ˆæ¯”Startæ›´æ—©ï¼‰
        _rb = GetComponent<Rigidbody2D>();
    }

    // å¤„ç†è¾“å…¥
    void Update() {
        // æ£€æŸ¥æ˜¯å¦æŒ‰ç©ºæ ¼é”®
        if (Input.GetKeyDown(KeyCode.Space)) {
            Jump(); // è°ƒç”¨è·³è·ƒæ–¹æ³•
        }
    }

    // è·³è·ƒé€»è¾‘
    private void Jump() {
        // ä»…å½“åœ¨åœ°é¢æ—¶è·³è·ƒ
        if (_isGrounded) {
            _rb.velocity = new Vector2(_rb.velocity.x, JUMP_FORCE);
        }
    }
}
```

---

## äº”ã€å¸¸è§é”™è¯¯ä¸è§£å†³æ–¹æ¡ˆ

| é”™è¯¯ç°è±¡                          | åŸå›                      | è§£å†³æ–¹æ¡ˆ                     |
|----------------------------------|--------------------------|----------------------------|
| `The script has no MonoBehaviour` | ç±»åä¸æ–‡ä»¶åä¸ä¸€è‡´       | é‡å‘½åæ–‡ä»¶ä¸º`ClassName.cs`   |
| `Cannot instantiate MonoBehaviour` | è¯•å›¾ç”¨`new`åˆ›å»ºè„šæœ¬      | æ”¹ç”¨`AddComponent`æŒ‚è½½       |
| `NullReferenceException`         | æœªåœ¨Start/Awakeä¸­åˆå§‹åŒ–ç»„ä»¶ | åœ¨Awakeä¸­è·å–ç»„ä»¶å¼•ç”¨       |
| ä»£ç å¡é¡¿/å¸§ç‡ä¸ç¨³å®š              | ç‰©ç†æ“ä½œæ”¾åœ¨Updateä¸­      | ç§»åŠ¨åˆ°FixedUpdateä¸­         |

---

## å…­ã€æ€»ç»“ï¼šUnityè„šæœ¬é»„é‡‘æ³•åˆ™

1. **ç±»å = æ–‡ä»¶å**ï¼ˆè‹±æ–‡ï¼ŒPascalCaseï¼‰
2. **å¿…é¡»ç»§æ‰¿MonoBehaviour**
3. **ç‰©ç†æ“ä½œ â†’ FixedUpdate**ï¼Œ**è¾“å…¥å¤„ç† â†’ Update**
4. **ç»„ä»¶å¼•ç”¨ â†’ Awake**ï¼Œ**åˆå§‹åŒ– â†’ Start**
5. **ç§æœ‰å˜é‡ â†’ å‰ç¼€ä¸‹åˆ’çº¿**ï¼Œ**å…¬å…±å˜é‡ â†’ ç›´æ¥æš´éœ²**
6. **é¿å…åœ¨Updateä¸­ä½¿ç”¨Find/GetComponent**ï¼ˆç”¨Awakeåˆå§‹åŒ–å¼•ç”¨ï¼‰

> âœ¨ **ç»ˆææç¤º**ï¼š  
> `Unityçš„è„šæœ¬æ˜¯â€œç»„ä»¶â€è€Œéâ€œç±»â€â€”â€”å®ƒå¿…é¡»ä¾é™„äºæ¸¸æˆå¯¹è±¡æ‰èƒ½è¿è¡Œï¼`

---

**é™„ï¼šå¿«é€Ÿæ£€æŸ¥æ¸…å•**
- [ ] æ–‡ä»¶åä¸ç±»åä¸€è‡´ï¼ˆè‹±æ–‡ï¼‰
- [ ] ç»§æ‰¿è‡ª`MonoBehaviour`
- [ ] æœªä½¿ç”¨`new`åˆ›å»ºè„šæœ¬
- [ ] ç‰©ç†æ“ä½œåœ¨`FixedUpdate`
- [ ] è¾“å…¥å¤„ç†åœ¨`Update`
- [ ] ç»„ä»¶å¼•ç”¨åœ¨`Awake`åˆå§‹åŒ–
- [ ] å‘½åç¬¦åˆPascal/camelCaseè§„èŒƒ

> æœ¬è§„èŒƒå·²é€šè¿‡Unity 2021-2023ç‰ˆæœ¬éªŒè¯ï¼Œé€‚ç”¨äºæ‰€æœ‰2D/3Dé¡¹ç›®å¼€å‘ã€‚  
> **è®°ä½ï¼šè§„èŒƒä¸æ˜¯æŸç¼šï¼Œè€Œæ˜¯è®©å›¢é˜Ÿåä½œæ›´é«˜æ•ˆã€ä»£ç æ›´å¯é çš„åŸºç¡€ï¼** ğŸš€